## イタケン 参加者データベース

### 作りたいもの
* 現在の年度別参加者リストを1つにする
* 兄弟の有無の判定
* 兄弟IDのデータ追加
* 住所のセル分け（都道府県と市町村は別など）
* データベースを基準に、各研究者のリストのミスを指摘（住所、名前、研究者番号などでの照合、ミスのアラート）
* 検索、修正、削除のシステム
  * e.g 報告書送付リスト内に兄弟がいるかどうか
  * GUIを実装？もしくはエクセルのシステムの利用
* 使う人は素人、自分たちが必ずメンテできるとも限らない
  * できるだけ難しくしない、シンプルなプログラムに
  * **エラー処理をしっかり（混乱させないように）**
* できるかぎり軽く？
  * 現時点で2000行ほど…1年で＋200人（行）

### 準備
* ~~WindowsでのPython3系と2系の共存（日本語を使用するならPython3がよいだろう）~~
  * ~~呼び出しの使い分けで対応する(python or python3)~~
* タスクを細かく分けて、ちょっとずつ（もしくはデスマーチ）でも作業がしやすいように
* 偽データの作成
  * そういうサイトがあるので積極的に利用
  * [疑似個人情報データ生成サービス](http://hogehoge.tk/personal/)

### タスク案
#### 目標1 参加者リストを1つにする(その過程でデータを整理・追加)：夏休み中
**参加者リストを1つにするために、各形式を揃えるプログラム（e.g. 住所）、新しく兄弟についての情報を追加するプログラムを作成する**

##### データベースをまとめる作業
  * 各年度のエクセルデータの確認
  * 各年度の書式（列順）を揃える
  * コピペして1つのデータに（or まとめるプログラムを作成する）
  * データ形式はxlsx or csv？

##### 兄弟の有無の判定、兄弟IDの追加：整理用プログラム1
 * いくつかの指標が完全に一致する行を抽出（例えば 母親の名前、電話番号、郵便番号など：できるかぎりゆらぎの少ないもの）
 * 一致したものがあれば、兄弟ありとする（0 or 1の1を記入）
 * 一致した行のIDをまとめて、兄弟IDとして書き込む
 * これを1行ずつ全データに対して判定（この作業までにデータベースを1つにまとめる）
 * 手動で備考欄との整合性を確かめる（兄弟がいるのに判定されてない,兄弟IDがおかしいなど）

##### 郵便番号による住所の統一（および都道府県などのセル分け）：整理用プログラム2
 * ローカルもしくはネットから郵便番号DBにアクセスできるようにする（できるかぎりローカルで済ます）
 * 参加者DBの郵便番号から、郵便番号DBを検索 →　住所を抽出
 * 都道府県・市町村などでセル分けして書き込み
 * 残りの部分をできるかぎり統一して書き込み（書き方のゆらぎに対応する）
 * これを1行ずつ全データに対して判定（この作業までにデータベースを1つにまとめる）
 * 住所を手動で確認（バーっと見て間違ってないかどうか）

#### 目標2 データベース利用のためのシステム構築:時間があれば少しずつ、もしくは来年
##### 詳細は追々作成
  * データベースを基準に、各研究者のリストのミスを指摘（住所、名前、研究者番号などの全一致での照合、ミスのアラート）
  * 検索、修正、削除のシステム

### メモ
* データ形式はxlsx or csvでOKか？
  * python - sql - csvみたいにsqlをかますって手もある？
  * メリット・デメリットは？
